---
import Link from './Link';
import menu from '../assets/images/burger-menu-svgrepo-com.svg';
import { SECTIONS } from './Link';
---

<nav class="px-4 h-[80px] 2xl:px-0 relative">
    <div class="wrapper h-full flex justify-between items-center">
        <div class="w-40">
            <img src="/assets/logo.png" alt="logo codecup" />
        </div>
        <button
            aria-controls="primary-navigation "
            aria-expanded="false"
            class="2xl:hidden mobile-nav-toggle"
        >
            <img src={menu} alt="" />
            <span class="sr-only">menu</span>
        </button>
        <ul
            id="primary-navigation"
            data-visible="false"
            class="primary-navigation w-full 2xl:w-auto fixed 2xl:static 2xl:gap-4 top-[80px] left-0 flex flex-col 2xl:flex-row items-center mt-4 z-50"
        >
            {SECTIONS.map((section) => <Link title={section.title} />)}
        </ul>
    </div>
</nav>

<style>
    .wrapper {
        max-width: clamp(62.5rem, calc(-63.13rem + 167.36vw), 87.5rem);
        margin-inline: auto;
    }

    .mobile-nav-toggle {
        width: 2rem;
        border: 0;
        aspect-ratio: 1;
    }

    @media (max-width: 1201px) {
        .primary-navigation {
            padding-inline: 1rem;
            transform: translateX(100%);
            transition: transform 400ms ease-in;
        }

        .primary-navigation[data-visible='true'] {
            transform: translateX(0%);
        }
    }
</style>

<script>
    const primaryNav = document.querySelector('.primary-navigation');
    const navToggle = document.querySelector('.mobile-nav-toggle');

    navToggle?.addEventListener('click', () => {
        const visibility = primaryNav?.getAttribute('data-visible');

        console.log(visibility);

        if (visibility === 'false') {
            primaryNav?.setAttribute('data-visible', 'true');
            navToggle?.setAttribute('aria-expanded', 'true');
        } else if (visibility === 'true') {
            primaryNav?.setAttribute('data-visible', 'false');
        }
    });
</script>
